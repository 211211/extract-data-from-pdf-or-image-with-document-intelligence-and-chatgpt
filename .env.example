APP_NAME=extract-data-from-pdf-or-image-with-document-intelligence-and-chatgpt
APP_VERSION=1.0.0
APP_HOST=0.0.0.0
APP_PORT=8083

APP_BASE_PATH=/api/v1

# OpenAI
OPENAI_API_KEY=

# Azure OpenAI (Responses API)
# Note: This project uses the Azure OpenAI Responses API (/openai/responses)
# which requires API version 2025-04-01-preview or later
AZURE_OPENAI_API_INSTANCE_NAME=
AZURE_OPENAI_API_VERSION=2025-04-01-preview
AZURE_OPENAI_API_DEPLOYMENT_NAME=gpt-5.1
AZURE_OPENAI_API_KEY=

# Azure AI Foundry - Grok
AZURE_AI_FOUNDRY_BASE_URL=
AZURE_AI_FOUNDRY_API_VERSION=
AZURE_AI_FOUNDRY_API_KEY=

# Document Intelligence
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=
AZURE_DOCUMENT_INTELLIGENCE_KEY=

# Azure Search
AZURE_SEARCH_API_KEY=
AZURE_SEARCH_NAME=
AZURE_SEARCH_INDEX_NAME=
AZURE_SEARCH_API_VERSION=

# Azure OpenAI Embeddings
AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME=text-embedding-ada-002

# ============================================================================
# Database Configuration (Chat History Persistence)
# ============================================================================

# Database Provider: 'memory' (dev), 'sqlite' (standalone demo), 'cosmosdb' (production)
# - memory: In-memory storage, data lost on restart (default for dev)
# - sqlite: File-based SQLite, persists to disk
# - cosmosdb: Azure CosmosDB (recommended for production)
DATABASE_PROVIDER=cosmosdb

# SQLite Configuration (required if DATABASE_PROVIDER=sqlite)
DATABASE_SQLITE_PATH=./data/chat.db

# Memory store TTL in milliseconds (optional, 0 = no expiry)
DATABASE_MEMORY_TTL_MS=0

# ============================================================================
# Azure CosmosDB Configuration (required if DATABASE_PROVIDER=cosmosdb)
# ============================================================================

# CosmosDB Account Endpoint
AZURE_COSMOSDB_ENDPOINT=https://your-account.documents.azure.com:443/

# CosmosDB Primary Key
AZURE_COSMOSDB_KEY=

# CosmosDB Database Name (auto-created if not exists)
AZURE_COSMOSDB_DATABASE=chatdb

# CosmosDB Container Name (auto-created if not exists)
AZURE_COSMOSDB_CONTAINER=chat

# CosmosDB Consistency Level (default: Session for read-your-writes)
# Options: Strong, BoundedStaleness, Session, ConsistentPrefix, Eventual
# - Session: Best for read-your-writes (default, recommended)
# - Strong: Linearizable reads (highest latency, global consistency)
# - Eventual: Lowest latency (may read stale data)
AZURE_COSMOSDB_CONSISTENCY_LEVEL=Session

# ============================================================================
# Streaming Configuration (Real-time SSE)
# ============================================================================

# Stream Store Provider: 'memory' for single instance, 'redis' for multi-instance
# - memory: Local abort only (single server instance)
# - redis: Cross-instance abort via Redis Pub/Sub (horizontal scaling)
SSE_STREAM_STORE_PROVIDER=memory

# Redis Configuration (required if SSE_STREAM_STORE_PROVIDER=redis)
# Used for: Cross-instance stream abort signals via Pub/Sub
REDIS_URL=redis://localhost:6379

# ============================================================================
# Observability - Langfuse (Self-Hosted MIT Version)
# ============================================================================
# Langfuse provides LLM observability: traces, generations, token usage, costs
# Self-hosted setup: https://langfuse.com/docs/deployment/self-host

# Enable/disable Langfuse (default: true if keys are set)
LANGFUSE_ENABLED=true

# Langfuse API keys (from your self-hosted Langfuse instance)
# Create keys at: http://localhost:3000/settings/api-keys
LANGFUSE_PUBLIC_KEY=pk-lf-...
LANGFUSE_SECRET_KEY=sk-lf-...

# Langfuse server URL (default: http://localhost:3000 for local dev)
# For self-hosted: your Langfuse instance URL
LANGFUSE_BASE_URL=http://localhost:3000

# Batching configuration (optional)
# LANGFUSE_FLUSH_AT=15       # Flush when this many events are queued
# LANGFUSE_FLUSH_INTERVAL=10000  # Flush interval in milliseconds
